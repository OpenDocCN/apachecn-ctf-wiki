<!--yml
category: 未分类
date: 2022-04-26 14:49:06
-->

# CTF从入门到提升（十四）session phpinfo包含及例题详解_anquanniu牛油果的博客-CSDN博客

> 来源：[https://blog.csdn.net/anquanniu/article/details/100883100](https://blog.csdn.net/anquanniu/article/details/100883100)

**具体场景——session**

PHP默认生成的session文件往往存放在/tmp目录下
![在这里插入图片描述](img/86e1f520c06144439d15700dc6b7e49b.png)

**举栗子**
​

题目内容：看看我的notebooktips；

tips：文件包含phpinfo是不是有新的发现

用给到的内容去做题目，我们可以看一下这道题目，进来之后首页找到url。
![在这里插入图片描述](img/8c4d8a0c5abfe21e21b44694e77bd5ab.png)

如果把php删掉，会发现登录入口不存在，初步推断php是后缀名会自动拼接到URL后面。
![在这里插入图片描述](img/d7f5303807d6f0e6ed7edbfadf67e0b5.png)

有了这个设想判断后，我们去读文件login改成password会发现不存在登录入口。

![在这里插入图片描述](img/e453212ec6f3992e17f96026175b80e0.png)

我们注册用户来看一下，线索已经用完了，我们要发掘新的线索新的功能，有管理员账号可以进去看源代码会不会有提示。
![在这里插入图片描述](img/eebe3de2f1531df1e1a41eafc6563557.png)

比如admin账号和密码去爆破，或者注入，扫后台扫备份文件，我们会看到一个phpinfo文件，因为题目中的提示提到了文件包含，它必然是一个非常重要的点，那就需要我们考虑它到底有什么用。
![在这里插入图片描述](img/9d1bb6438703ec4623d6f1e24e28f9ef.png)
![在这里插入图片描述](img/baeab18b642b97c6ae309164bc14cce0.png)

我们可以包含这个文件试一下，按照刚才的文件名后缀发现可以读出文件。
![在这里插入图片描述](img/64d3f3ed4d06ffc017874b6d386d8b0f.png)
![在这里插入图片描述](img/7598515054001d30516b01cbaa7001b7.png)
只有访问以上两个目录才能够被读取。

如果file读取文件换成index.php会怎样呢？发现它能够回来然后又跳转到UL。
![在这里插入图片描述](img/383c4bd0260bcae85f55e10d20917505.png)

​
**具体场景——远古魔法**
![在这里插入图片描述](img/f4c941432d920639ea26638307f88d16.png)

**举栗子**

![在这里插入图片描述](img/0d23f6507dc5d55022c60eb8e5da8558.png)
get去传一个配置的值，然后去包含下面的一文件名，配合.php为后缀名进行截断，不停的敲点或者点杠。

![在这里插入图片描述](img/3f8bb27d76b5044c85dcbb6121ec86f8.png)

具体场景——phpinfo

文件上传无论后台有没有接受我传上的文件这个功能它都是会有文件先传上去的这个步骤，文件上传的函数代码逻辑是形成一个临时文件，然后把临时文件移过来。所以我们对php文件去做上传操作都会产生临时文件，后台如果没有这些函数，临时文件生成后又会被删掉，如果过手速够快，是有办法能够访问到临时文件的，用文件包含的操作去包含它，会触发临时文件中的代码，能拿到临时文件就可以getshell，但是难点在于临时文件的文件名我们不知道，也不知道在哪个路径下。
​
**演示**
​![在这里插入图片描述](img/6fa305dd61fafb68a9877615d5353b06.png)
![在这里插入图片描述](img/4e713ddcde342f6e0a0e01cd11ebbd91.png)

以上内容参考安全牛课堂《CTF从入门到提升》